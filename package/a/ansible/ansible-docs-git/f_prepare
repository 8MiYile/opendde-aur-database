prepare() {
    cd "${_reponame}"

    echo "Setting up Python venv dir: ${srcdir}/${_py_venv_dir}"
    echo '# We need this because Arch and AUR are missing a lot of needed makedepends.'
    # Disabled venv option: --system-site-packages, because Arch/AUR packages likely mismatch
    # too much compared to the versions needed by build's actual requirements.
    python -m 'venv' \
        --upgrade-deps \
        "${srcdir}/${_py_venv_dir}"

    echo "Activating Python venv in dir: ${srcdir}/${_py_venv_dir}"
    source "${srcdir}/${_py_venv_dir}/bin/activate"

    echo "Installing Python modules missing from root to venv dir \"${_py_venv_dir}\"..."
    pip install wheel       # this needs to be installed first
    pip install \
        --compile \
        --require-virtualenv \
        --upgrade \
        --upgrade-strategy eager \
        --requirement 'docs/docsite/requirements.txt' \
        'types-docutils'    # seems it is not declared but needed

    echo "Deactivating Python venv in dir: ${srcdir}/${_py_venv_dir}"
    deactivate
}
