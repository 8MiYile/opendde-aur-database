prepare() {
  cd "$srcdir/AppImageLauncher"
  git submodule init
  git config submodule.lib/AppImageUpdate.url "$srcdir/AppImageUpdate"
  git config submodule.lib/libappimage.url "$srcdir/libappimage"
  git -c protocol.file.allow=always submodule update

  pushd lib/AppImageUpdate
  git submodule init
  git config submodule.lib/zsync2.url "$srcdir/zsync2"
  git config submodule.lib/sanitizers-cmake.url "$srcdir/sanitizers-cmake"
  git config submodule.lib/libappimage.url "$srcdir/libappimage"
  git -c protocol.file.allow=always submodule update
  popd

  pushd lib/AppImageUpdate/lib/libappimage
  git submodule init
  git config submodule.lib/gtest.url "$srcdir/googletest"
  git -c protocol.file.allow=always submodule update
  popd

  pushd lib/AppImageUpdate/lib/zsync2
  git submodule init
  git config submodule.lib/cpr.url "$srcdir/cpr"
  git config submodule.lib/args.url "$srcdir/args"
  git config submodule.lib/gtest.url "$srcdir/googletest"
  git -c protocol.file.allow=always submodule update
  popd

  pushd lib/libappimage
  git submodule init
  git config submodule.lib/gtest.url "$srcdir/googletest"
  git -c protocol.file.allow=always submodule update
  popd
}
