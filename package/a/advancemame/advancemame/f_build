build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  # Fix build errors due new gcc 10 default for -fno-common
  for line in 290 855 856; do
    sed -i -e "${line}s/^/extern /" src/drivers/cavepgm.c
  done
  if [ "$CARCH" == 'armv7h' ]; then # Do not link SDL into Raspberry Pi build
    ./configure CFLAGS="-O2 -fno-strict-aliasing -fno-strict-overflow -fsigned-char -fno-stack-protector" --prefix=/usr --disable-sdl --disable-sdl2
  else
    ./configure CFLAGS="-O2 -fno-strict-aliasing -fno-strict-overflow -fsigned-char -fno-stack-protector" --prefix=/usr
  fi
  make || return 1
}
