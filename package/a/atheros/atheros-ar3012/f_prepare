prepare() {
	cd $srcdir
	
	export version=$(uname -r | cut -d '-' -f 1)

	if [ ! -e "./linux-$version.tar.xz" ]; then
		echo "Downloading appropriate kernel souce code..."
		wget "https://mirrors.edge.kernel.org/pub/linux/kernel/v4.x/linux-$version.tar.xz"
	else
		echo "Appropriate Linux source already exists."
	fi

	tar -xvJf linux-$version.tar.xz


	cd linux-$version
	patch -p0 ./drivers/bluetooth/btusb.c < ../../atheros-ar3012.diff
}
