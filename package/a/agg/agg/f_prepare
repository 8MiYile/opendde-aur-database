prepare() {
  cd "$pkgname-$pkgver"

  patch -p1 -i ../agg-2.4-depends.patch
  patch -p1 -i ../agg-2.5-pkgconfig.patch
  patch -p0 -i ../agg-2.5-autotools.patch
  patch -p1 -i ../0001-Fix-non-terminating-loop-conditions-when-len-1.patch
  patch -p1 -i ../0002-Cure-recursion-by-aborting-if-the-co-ordinates-are-t.patch
  patch -p1 -i ../0003-Get-coordinates-from-previous-vertex-if-last-command.patch
  patch -p1 -i ../0004-Make-rasterizer_outline_aa-ignore-close_polygon-when.patch
  patch -p1 -i ../0005-Remove-VC-6-workaround.patch
  patch -p1 -i ../0006-Implement-grain-merge-blending-mode-GIMP.patch
  patch -p1 -i ../0007-Implement-grain-extract-blending-mode-GIMP.patch
  patch -p1 -i ../0008-Declare-multiplication-and-division-operators-as-con.patch
  patch -p1 -i ../0009-Add-a-static-identity-transformation.patch
  patch -p1 -i ../0010-Add-renderer_scanline_aa_alpha.patch
  patch -p1 -i ../0011-Avoid-division-by-zero-in-color-burn-mode.patch
  patch -p1 -i ../0012-Avoid-pixel-artifacts-when-compositing.patch
  patch -p1 -i ../0013-Modify-agg-conv-classes-to-allow-access-to-the-origi.patch
  patch -p1 -i ../0014-Avoid-potential-zero-division-resulting-in-nan-in-ag.patch
  patch -p1 -i ../0015-Ensure-first-value-in-the-gamma-table-is-always-zero.patch
  patch -p1 -i ../bad-const.patch

  aclocal
  autoheader
  autoconf
  libtoolize -f
  automake --foreign -a -i
}
