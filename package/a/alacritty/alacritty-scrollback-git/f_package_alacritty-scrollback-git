package_alacritty-scrollback-git() {
  pkgdesc='A cross-platform, GPU-accelerated terminal emulator (scrollback branch)'
  depends=(freetype2 fontconfig libxcursor libxrandr xclip)
  provides=(alacritty)
  conflicts=(alacritty)

  cd alacritty
  install -D target/release/alacritty "$pkgdir"/usr/bin/alacritty
  install -Dm 644 alacritty.man "$pkgdir"/usr/share/man/man1/alacritty.1 || true
  install -Dm 644 alacritty-completions.bash "$pkgdir"/usr/share/bash-completion/completions/alacritty || true
  install -Dm 644 alacritty-completions.zsh "$pkgdir"/usr/share/zsh/site-functions/_alacritty || true
  install -Dm 644 alacritty-completions.fish "$pkgdir"/usr/share/fish/completions/alacritty.fish || true
  _desktop="$pkgdir"/usr/share/applications/alacritty.desktop
  install -Dm 644 alacritty.desktop "$_desktop"
  sed -i 's#utilities-terminal#alacritty#' "$_desktop"
  _icons="$pkgdir"/usr/share/icons
  mkdir -p "$_icons"
  icns2png -x -s 1024 assets/osx/Alacritty.app/Contents/Resources/alacritty.icns -o "$_icons"
  mv "$_icons"/alacritty{_1024x1024x32,}.png
 }

package_alacritty-scrollback-terminfo-git() {
  pkgdesc='Terminfo files for the alacritty terminal emulator (scrollback branch)'
  provides=(alacritty-terminfo)
  conflicts=(alacritty-terminfo)

  cd alacritty
  install -d "$pkgdir"/usr/share/terminfo/a
  tic -o "$pkgdir"/usr/share/terminfo alacritty.info
}
