build() {
    cd "${srcdir}/skia"
    bin/gn gen out/Clang --args='cc="clang" cxx="clang++" extra_ldflags=["-stdlib=libc++"] extra_cflags=["-stdlib=libc++"] is_debug=false is_official_build=true skia_use_system_expat=false skia_use_system_icu=false skia_use_system_libjpeg_turbo=false skia_use_system_libpng=false skia_use_system_libwebp=false skia_use_system_zlib=false skia_use_sfntly=false skia_use_freetype=true skia_use_harfbuzz=true skia_pdf_subset_harfbuzz=true skia_use_system_freetype2=false skia_use_system_harfbuzz=false'    
    # bin/gn gen out/Clang --args='is_debug=false is_official_build=true skia_use_system_expat=false skia_use_system_icu=false skia_use_system_libjpeg_turbo=false skia_use_system_libpng=false skia_use_system_libwebp=false skia_use_system_zlib=false skia_use_sfntly=false skia_use_freetype=true skia_use_harfbuzz=true skia_pdf_subset_harfbuzz=true skia_use_system_freetype2=false skia_use_system_harfbuzz=false'
    ninja -C out/Clang skia modules

    cd "${srcdir}/${_pkgname}/build"

    # https://github.com/aseprite/aseprite/issues/2843
    # -DUSE_SHARED_CMARK=ON \
    # -DUSE_SHARED_CURL=ON \
    # -DUSE_SHARED_GIFLIB=ON \
    # -DUSE_SHARED_JPEGLIB=ON \
    # -DUSE_SHARED_ZLIB=ON \
    # -DUSE_SHARED_LIBPNG=ON \
    # -DUSE_SHARED_TINYXML=ON \
    # -DUSE_SHARED_PIXMAN=ON \
    # -DUSE_SHARED_FREETYPE=ON \
    # -DUSE_SHARED_HARFBUZZ=ON \

    cmake \
        -DCMAKE_BUILD_TYPE=RelWithDebInfo \
        -DCMAKE_C_COMPILER="clang" \
        -DCMAKE_CXX_COMPILER="clang++" \
        -DCMAKE_CXX_FLAGS:STRING="-stdlib=libc++" \
        -DCMAKE_EXE_LINKER_FLAGS:STRING="-Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now -stdlib=libc++" \
        -DCMAKE_INSTALL_PREFIX=/usr \
        -DLAF_BACKEND=skia \
        -DSKIA_DIR="$srcdir/skia" \
        -DSKIA_LIBRARY_DIR="$srcdir/skia/out/Clang" \
        -DSKIA_LIBRARY="$srcdir/skia/out/Clang/libskia.a" \
        -DLAF_WITH_TESTS=OFF \
        -DLAF_WITH_EXAMPLES=OFF \
        -G Ninja \
        ..
    ninja ${_pkgname}
}
