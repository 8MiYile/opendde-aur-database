prepare() {
	# Extract Aseprite's sources
	mkdir -p aseprite
	bsdtar -xf "${noextract[0]}" -C aseprite
	# Extract Skia's sources
	mkdir -p skia
	bsdtar xf skia-$_skiaver.tar.gz  --strip-components=1 -C skia
	# Fix up Aseprite's desktop integration
	env -C aseprite patch -tp1 <desktop.patch
	# Allow using more shared libs
	env -C aseprite patch -tp1 <shared-fmt.patch
	env -C aseprite patch -tp1 <shared-libarchive.patch
	env -C aseprite patch -tp1 <shared-libwebp.patch
	env -C aseprite patch -tp1 <optional-pixman.patch
	# Their "FindSkia" module forcefully tries to use Skia's FreeType and HarfBuzz,
	# but we don't clone those because we use the shared ones. Avoid overwriting the settings instead.
	env -C aseprite patch -tp1 <shared-skia-deps.patch
}
