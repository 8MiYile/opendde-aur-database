pkgver() {
    cd "${srcdir}/${gitname}"

    # we recently went
    # from 2.21.204.5117359
    # to   2.21.1.209.a9d7a00
    # which rightfully confused pacman's version ordering
    # so let's add a .0 to versions with only one dot
    local v=$(cat VERSION)
    [[ "$v" =~ ^[^\.]+\.[^\.]+\..*$ ]] || v=$v.0

    local ver="${v}.$(git rev-list --count HEAD).$(git rev-parse --short HEAD)"
    printf "%s" "${ver//-/.}"
}
