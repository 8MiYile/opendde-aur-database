package() {
  cd "$srcdir/bitcoin-cash-node-$pkgver"

  install -Dm 644 COPYING -t "$pkgdir/usr/share/licenses/bitcoincash"

  install -dm 755 "$pkgdir/usr/share/doc/bitcoincash"
  for _doc in \
    $(find doc -maxdepth 1 -type f -name "*.md" -printf '%f\n') \
    release-notes; do
      cp -dpr --no-preserve=ownership "doc/$_doc" \
        "$pkgdir/usr/share/doc/bitcoincash/$_doc"
  done

  pushd build
  cmake -DCOMPONENT=bitcoind -P cmake_install.cmake
  popd
  mv "$pkgdir/usr/bin/bitcoind" "$pkgdir/usr/bin/bitcoincashd"
  mv "$pkgdir/usr/bin/bitcoin-cli" "$pkgdir/usr/bin/bitcoincash-cli"
  mv "$pkgdir/usr/bin/bitcoin-tx" "$pkgdir/usr/bin/bitcoincash-tx"

  install -Dm 600 "$srcdir/bitcoincash.conf" -t "$pkgdir/etc/bitcoincash"
  install -Dm 644 "$srcdir/bitcoincash.service" -t "$pkgdir/usr/lib/systemd/system"
  install -Dm 644 "$srcdir/bitcoincash.logrotate" "$pkgdir/etc/logrotate.d/bitcoincash"
  install -Dm 644 "$srcdir/bitcoincash.sysusers" "${pkgdir}/usr/lib/sysusers.d/bitcoincash.conf"
  install -Dm 644 "$srcdir/bitcoincash.tmpfiles" "${pkgdir}/usr/lib/tmpfiles.d/bitcoincash.conf"

  install -Dm 644 "contrib/bitcoin-cli.bash-completion" \
    "$pkgdir/usr/share/bash-completion/completions/bitcoincash-cli"
  install -Dm 644 "contrib/bitcoin-tx.bash-completion" \
    "$pkgdir/usr/share/bash-completion/completions/bitcoincash-tx"
  install -Dm 644 "contrib/bitcoind.bash-completion" \
    "$pkgdir/usr/share/bash-completion/completions/bitcoincashd"
}
