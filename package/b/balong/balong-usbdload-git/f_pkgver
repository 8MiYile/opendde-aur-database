pkgver() {
  cd "${_pkgname}"

  _ver="$(grep -E 'варийный USB-загрузчик Balong-чипсета, версия' balong-usbdload.c | head -n1 | sed -E 's|.*версия ([^[:space:]]*).*|\1|' | tr -d ',')"
  _rev="$(git rev-list --count HEAD)"
  _date="$(git log -1 --date=format:"%Y%m%d" --format="%ad")"
  _hash="$(git rev-parse --short HEAD)"

  if [ -z "${_ver}" ]; then
    error "Version could not be determined."
    return 1
  else
    printf '%s' "${_ver}.r${_rev}.${_date}.${_hash}"
  fi
}
