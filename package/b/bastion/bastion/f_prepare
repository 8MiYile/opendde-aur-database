prepare() {
    msg2 "Extracting game data..."
    rm -rf data; mkdir -p data/game
    while read line; do echo -n '.'; done < <(  # show progress as dots
        sh $_gamepkg --tar xvf -C data
        bsdtar -xvf data/instarchive_all          -C data/game 2>&1
        bsdtar -xvf data/instarchive_linux_$_arch -C data/game 2>&1
    ); echo
    
    msg2 "Preparing launch script..."
    echo -e "#!/usr/bin/env bash\n" \
            "cd /opt/$_installname\n" \
            "export force_s3tc_enable=true\n" \
            'exec mono Bastion.exe "$@"' \
        > launcher.sh
    
    # Set apart files to install separately
    mv data/game/{Bastion.png,README.linux} "$srcdir"
}
