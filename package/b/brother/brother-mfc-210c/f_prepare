prepare() {

  patch -p1 < $srcdir/adjust-setupPrintcapij-to-arch.patch
  patch -p1 < $srcdir/adjust-cupswrapperMFC210C-1.0.0-to-arch.patch

  # use /usr/share/brother instead of /usr/local/Brother
  mkdir -p usr/share/cups/model
  mv usr/local/Brother usr/share/brother
  rmdir usr/local
  sed -i "s:/usr/local/Brother:/usr/share/brother:g" $(grep -rl "usr/local/Brother" .)

  # replace '/usr' by '$srcdir/usr' while running cupswrapperMFC210C-1.0.0
  sed -i "s:/usr:$srcdir/usr:g" $(grep -rl "usr" .)
  # run cupswrapperMFC210C-1.0.0 doing the actual work
  ./usr/share/brother/cupswrapper/cupswrapperMFC210C-1.0.0
  # revert path changes to get well-behaved FHS citizens again
  sed -i "s:$srcdir/usr:/usr:g" $(grep -rl "$srcdir/usr" .)
  # adjust some permission bits
  chmod 775 usr/share/brother/inf
  chmod 660 usr/share/brother/inf/brMFC210Crc
}
