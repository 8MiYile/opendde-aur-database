build() {
  export GOPATH="$srcdir"

  echo 'Building btcd and dependencies...'
  cd "$GOPATH/src/github.com/btcsuite/btcd"
  go install -buildmode=pie -ldflags -extldflags=-Wl,-z,now,-z,relro . ./cmd/...
  go clean -modcache

  echo 'Building btcwallet and dependencies...'
  cd "$GOPATH/src/github.com/btcsuite/btcwallet"
  go install -buildmode=pie -ldflags -extldflags=-Wl,-z,now,-z,relro . ./cmd/...
  go clean -modcache

  echo 'Prepending btc to unqualified binaries...'
  for _bin in $(find "$srcdir/bin"  \
                        -mindepth 1 \
                        -maxdepth 1 \
                        -type f ! -name "btc*" -printf '%f\n'); do
    mv "$srcdir/bin/$_bin" "$srcdir/bin/btc$_bin"
  done
}
